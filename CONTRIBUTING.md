# Руководство по внесению вклада
## Быстрый старт

### Предварительные требования

- **Python 3.8 или выше**
- **Git** для управления версиями
- **Знание криптографии** на базовом уровне

### Настройка окружения разработчика

```bash
# 1. Форк репозитория
# Нажмите кнопку "Fork" в правом верхнем углу страницы репозитория

# 2. Клонирование вашего форка
git clone https://github.com/ваш-username/cryptocore.git
cd cryptocore

# 3. Добавление оригинального репозитория как upstream
git remote add upstream https://github.com/оригинальный-репозиторий/cryptocore.git

# 4. Создание виртуального окружения
python -m venv venv

# Активация виртуального окружения:
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# 5. Установка зависимостей
pip install -r requirements.txt

# 6. Установка пакета в режиме разработки
pip install -e .
```

## Создание ветки для разработки
## Получение последних изменений из upstream
git fetch upstream
git checkout main
git merge upstream/main

## Создание новой ветки
git checkout -b тип/краткое-описание
 Например:
 git checkout -b feat/new-mode
 git checkout -b fix/handle-large-files
 git checkout -b docs/update-api

## Процесс разработки
## 1. Планирование изменений
Перед началом работы:
Проверьте существующие issues - возможно, ваша идея уже обсуждается
Создайте новый issue для обсуждения предлагаемых изменений
Получите обратную связь от сообщества и мейнтейнеров
Согласуйте дизайн для больших изменений

## 2. Разработка кода
## Регулярно синхронизируйтесь с основной веткой
```bash
git fetch upstream
git merge upstream/main

# Делайте маленькие, атомарные коммиты
git add измененные_файлы
git commit -m "тип: краткое описание"

# Примеры хороших сообщений коммитов:
# feat: добавлен режим шифрования XTS
# fix: исправлена обработка больших файлов в HMAC
# docs: обновлена документация API
# test: добавлены тесты для нового режима
# refactor: реорганизация модуля хеширования
```
## Криптографические соглашения
Именование переменных
##  ПРАВИЛЬНО
encryption_key = b'\x00' * 16
initialization_vector = os.urandom(16)
authentication_tag = compute_tag(data)

##  НЕПРАВИЛЬНО
key = b'\x00' * 16  # без контекста
iv = os.urandom(16)  # сокращение без пояснения
tag = compute_tag(data)  # без контекста

## Безопасность по умолчанию
##  ПРАВИЛЬНО: постоянные по времени операции
def constant_time_compare(a: bytes, b: bytes) -> bool:
    """Сравнение, постоянное по времени."""
    if len(a) != len(b):
        return False
    result = 0
    for x, y in zip(a, b):
        result |= x ^ y
    return result == 0

##  НЕПРАВИЛЬНО: уязвимость по времени
def unsafe_compare(a: bytes, b: bytes) -> bool:
    return a == b  # Прерывается при первом несовпадении

## Тестирование
## Запуск всех тестов
python tests/run_tests.py

## Только модульные тесты
python tests/run_tests.py --unit

## Только интеграционные тесты
python tests/run_tests.py --integration

## Конкретный тестовый файл
python -m pytest tests/unit/test_aes.py -v

## С измерением покрытия кода
python tests/run_tests.py --coverage

## Быстрые тесты (пропуск медленных)
python -m pytest tests/ -m "not slow"

## Документация
Обновление документации
API документация
При изменении API обновите docs/API.md

## Создание пул-реквестов
## 1. Подготовка пул-реквеста

## Убедитесь, что ваша ветка актуальна
git fetch upstream
git merge upstream/main

## Запустите тесты
python tests/run_tests.py

## Проверьте стиль кода
python -m pycodestyle cryptocore/ tests/ --max-line-length=88

## Создайте коммит с хорошим сообщением
git commit -m "feat: добавлен режим шифрования XTS"

## Отправьте ветку в ваш форк
git push origin feat/xts-mode

## 3. Процесс ревью
Автоматические проверки:

Тесты должны проходить

Покрытие кода не должно уменьшаться

Статический анализ не должен выявлять проблем

Ревью кода:

Как минимум один мейнтейнер должен одобрить изменения

Проверка на соответствие стандартам безопасности

Проверка качества документации

После одобрения:

Мейнтейнер выполнит squash и merge

Коммит будет добавлен в CHANGELOG.md

Изменения будут включены в следующую версию

## 1. Исправление ошибок
Процесс:
Воспроизведите ошибку
Добавьте тест, который падает из-за ошибки
Исправьте ошибку
Убедитесь, что тест теперь проходит
Добавьте дополнительные тесты для граничных случаев

## 2. Новая функциональность
Процесс:
Обсудите новую функциональность в issue
Спроектируйте API
Реализуйте с тестами
Добавьте документацию
Обновите примеры

## 3. Улучшение производительности
Области для оптимизации:
Обработка больших файлов
Операции в циклах
Использование памяти
Алгоритмическая сложность

## 4. Обновление документации
Что обновлять:
Исправление опечаток
Добавление недостающих примеров
Обновление устаревшей информации
Перевод на другие языки