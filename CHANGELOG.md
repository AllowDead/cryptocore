# Журнал изменений CryptoCore
## [0.1.0] - Спринт 1: Базовый каркас и ECB режимСпринт 1: Базовый каркас и ECB режим

### Добавлено
- **Базовая структура проекта**:
  - Git репозиторий с README.md
  - Логическая организация исходного кода
  - Build система (setup.py для Python)
- **Парсер командной строки (`cli_parser.py`)**:
  - Поддержка аргументов: `--algorithm`, `--mode`, `--encrypt/--decrypt`
  - Аргументы: `--key` (hex строка), `--input`, `--output`
  - Валидация всех аргументов
  - Обработка ошибок с понятными сообщениями
- **Реализация ECB режима (`modes/ecb.py`)**:
  - Использование AES примитива из pycryptodome/OpenSSL
  - Реализация логики ECB (разделение на блоки, вызов AES)
  - Padding по стандарту PKCS#7
  - Обработка текстовых и бинарных файлов
- **Модуль работы с файлами (`file_io.py`)**:
  - Чтение и запись файлов в бинарном режиме
  - Обработка ошибок файловой системы
- **Базовое тестирование**:
  - Round-trip тест (шифрование-дешифрование)
  - Сравнение с OpenSSL для проверки корректности
  - Тестовые скрипты в README.md

## [0.2.0] - Спринт 2: Режимы конфиденциальности

### Добавлено
- **Новые режимы шифрования** в модуле `modes/`:
  - `cbc.py` - Cipher Block Chaining с padding (PKCS#7)
  - `cfb.py` - Cipher Feedback как потоковый шифр
  - `ofb.py` - Output Feedback как потоковый шифр
  - `ctr.py` - Counter как потоковый шифр
- **Расширение CLI** для новых режимов:
  - Новые значения для `--mode`: `cbc`, `cfb`, `ofb`, `ctr`
  - Аргумент `--iv` для указания вектора инициализации
- **Автоматическая обработка IV**:
  - Генерация случайного IV при шифровании
  - Передача IV зашифрованному тексту
  - Чтение IV из файла или CLI при дешифровании
- **Логика padding** для разных режимов:
  - Padding (PKCS#7) для ECB и CBC
  - Без padding для потоковых режимов (CFB, OFB, CTR)
- **Совместимость с OpenSSL**:
  - Round-trip тесты для всех режимов
  - Инструкции для взаимодействия с OpenSSL CLI
- **Формат файлов**: `<16-byte IV><Ciphertext bytes>`

### Изменено
- **Расширен `cli_parser.py`** для поддержки IV и новых режимов
- **Обновлен `file_io.py`** для работы с IV в файлах
- **Реорганизована структура** с директорией `modes/`
- **Добавлены тесты** в `tests/test_modes.py`

## [0.3.0] - Спринт 3: Криптографически стойкий ГСЧ

### Добавлено
- **Новый модуль `csprng.py`** - Cryptographically Secure Pseudorandom Number Generator:
  - Функция `generate_random_bytes()` для генерации случайных байтов
  - Использование `os.urandom()` в Python
  - Обработка ошибок генерации
- **Автоматическая генерация ключей**:
  - Ключ становится необязательным для операций шифрования
  - Генерация 16-байтного случайного ключа при отсутствии `--key`
  - Вывод сгенерированного ключа в stdout
  - Обязательный ключ для операций дешифрования
- **Расширенная валидация ключей**:
  - Предупреждения о слабых ключах (все нули, последовательные байты)
  - Проверка длины ключа
- **Интеграция CSPRNG** в генерацию IV:
  - Использование `generate_random_bytes()` для генерации IV
  - Сохранение существующей логики обработки IV
- **Тестирование CSPRNG**:
  - Тест уникальности (1000 уникальных ключей)
  - Статистические тесты NIST STS
  - Базовые тесты распределения (вес Хэмминга ~50%)
  - Совместимость с существующими тестами

### Изменено
- **Расширен `cli_parser.py`** для поддержки опциональных ключей
- **Обновлена логика генерации IV** для использования CSPRNG
- **Добавлены тесты** в `tests/test_csprng.py`

## [0.4.0] - Спринт 4: Хеш-функции

### Добавлено
- **Новый модуль `hash/`** с реализациями хеш-функций:
  - `sha256.py` - SHA-256 реализация с нуля (FIPS 180-4)
  - `sha3_256.py` - SHA3-256 реализация с нуля (FIPS 202)
- **Новая CLI команда `dgst`** для вычисления дайджестов:
  - `--algorithm` - выбор алгоритма (sha256, sha3-256)
  - `--input` - входной файл
  - `--output` - необязательный выходной файл
- **Реализация SHA-256**:
  - Обработка 512-битных блоков
  - Padding схема (бит '1', нули, длина сообщения)
  - Константы из дробных частей корней простых чисел
  - Функции Ch, Maj, Σ, σ
- **Реализация SHA3-256**:
  - Конструкция Keccak sponge
  - Функция перестановки Keccak-f
  - Поглощение и выжимание данных
- **Обработка больших файлов** с постоянным использованием памяти
- **Тестирование хеш-функций**:
  - Тестовые векторы NIST
  - Проверка пустых входов
  - Тест лавинного эффекта
  - Совместимость с системными утилитами (sha256sum, sha3sum)

### Изменено
- **Новая структура проекта** с директорией `hash/`
- **Новый обработчик `hash_handler.py`** для команд хеширования
- **Расширен `cli_parser.py`** для поддержки команды `dgst`

## [0.5.0] - Спринт 5: Аутентификация сообщений (MAC)

### Добавлено
- **Новый модуль `mac/`** с реализациями MAC:
  - `hmac.py` - HMAC-SHA256 реализация с нуля
  - Поддержка ключей произвольной длины
- **Расширение CLI команды `dgst`**:
  - Новый флаг `--hmac` для включения режима HMAC
  - Обязательный аргумент `--key` при использовании `--hmac`
  - Флаг `--verify` для проверки существующего HMAC
- **Функциональность HMAC**:
  - Вычисление HMAC для файлов и данных в памяти
  - Проверка HMAC с возвратом кода ошибки
  - Обработка больших файлов чанками
  - Поддержка пустых файлов
- **Реализация HMAC** согласно RFC 2104:
  - Обработка ключей длиннее/короче блока
  - Использование opad (0x5c) и ipad (0x36)
  - Использование SHA-256 из Sprint 4
- **Тестирование HMAC**:
  - Тестовые векторы из RFC 4231
  - Обнаружение изменений в файлах
  - Обнаружение неправильных ключей
  - Тесты с разными размерами ключей

### Изменено
- **Переименован `hash_handler.py`** для поддержки HMAC операций
- **Расширен `cli_parser.py`** для парсинга HMAC аргументов
- **Добавлены тесты** в `tests/test_hmac.py`

## [0.6.0] - Спринт 6: Аутентифицированное шифрование (AEAD)

### Добавлено
- **Новый модуль `modes/gcm.py`** - реализация GCM с нуля:
  - Реализация Galois Field умножения в GF(2^128)
  - Аутентифицированное шифрование с тегом
  - Поддержка Additional Authenticated Data (AAD)
- **Новый обработчик `aead_handler.py`**:
  - Обработка команд аутентифицированного шифрования
  - Реализация парадигмы "Encrypt-then-MAC"
- **Расширение CLI для GCM**:
  - Новый режим `--mode gcm`
  - Новый аргумент `--aad` для дополнительных аутентифицированных данных
  - Автоматическая генерация nonce (12 байт вместо 16-байтного IV)
- **Безопасная обработка аутентификации**:
  - Катастрофический отказ при неправильном AAD
  - Проверка тега перед выводом данных
  - Удаление частично созданных файлов при ошибках
- **Структура вывода GCM**: `nonce(12) | ciphertext | tag(16)`
- **Тестирование GCM**:
  - Тестовые векторы NIST SP 800-38D
  - Тесты на обнаружение изменений данных
  - Тесты с пустым и большим AAD
  - Проверка уникальности nonce

### Изменено
- **Расширен `cli_parser.py`** для поддержки GCM и AAD
- **Обновлен `file_io.py`** для работы с форматом GCM
- **Добавлены тесты** в `tests/test_gcm.py`

## [0.7.0] - Спринт 7: Выведение ключей (Key Derivation Functions)

### Добавлено
- **Новый модуль `kdf/`** с функциями выведения ключей:
  - `pbkdf2.py` - PBKDF2-HMAC-SHA256 реализация с нуля
  - `hkdf.py` - HKDF реализация с нуля
- **Новый обработчик `kdf_handler.py`**:
  - Обработка команд выведения ключей
  - Интеграция с CLI парсером
- **CLI команда `derive`**:
  - `--password` - пароль для выведения ключа
  - `--salt` - соль (hex или авто-генерация)
  - `--iterations` - количество итераций (по умолчанию 100,000)
  - `--length` - длина ключа в байтах (по умолчанию 32)
  - `--output` - сохранение ключа в файл
- **Функции KDF**:
  - `pbkdf2_hmac_sha256()` - PBKDF2 с HMAC-SHA256
  - `derive_key()` - выведение ключа из мастер-ключа
  - `hkdf_extract()` и `hkdf_expand()` - операции HKDF
- **Тестирование KDF**:
  - Тесты с векторами RFC 6070 для PBKDF2
  - Проверка уникальности ключей
  - Совместимость с OpenSSL `openssl kdf`
  - Тесты производительности с разными итерациями

### Изменено
- **Расширен `hash_handler.py`** для поддержки KDF операций
- **Обновлен `cli_parser.py`** для парсинга аргументов `derive`
- **Добавлены тесты** в `tests/test_kdf.py`

## [0.8.0] - Спринт 8: Финальная полировка и документация

### Добавлено
- **Полная документация проекта**:
  - `docs/API.md` - полная API документация всех модулей
  - `docs/USERGUIDE.md` - руководство пользователя с примерами
  - `docs/DEVELOPMENT.md` - руководство разработчика
  - `docs/SECURITY.md` - политика безопасности
- **Расширенная структура тестов**:
  - Модульные тесты для всех компонентов
  - Интеграционные тесты end-to-end
  - Тестовые векторы NIST, RFC
  - Скрипт `tests/run_tests.py` для запуска всех тестов
  - Директория `docs/` с полной документацией
  - `CONTRIBUTING.md` - руководство для контрибьюторов
  - `CHANGELOG.md` - журнала изменений
- **Качество кода**:
  - Документация всех публичных функций
  - Проверка безопасности кода
  - Постоянные по времени операции для сравнения

### Изменено
- **Улучшение обработки ошибок** во всех модулях
- **Оптимизация производительности** для больших файлов

## [1.0.0] 

### Добавлено
- **Полная реализация всех 8 спринтов** 
- **Комплексная документация** 
- **Полный набор тестов** 
- **Готовый к использованию криптографический провайдер**

### Используемые стандарты
- **NIST FIPS 197** - AES стандарт
- **NIST SP 800-38A** - Режимы шифрования
- **NIST FIPS 180-4** - SHA-2 стандарт
- **NIST FIPS 202** - SHA-3 стандарт
- **NIST SP 800-38D** - GCM стандарт
- **RFC 2104** - HMAC спецификация
- **RFC 2898** - PBKDF2 спецификация
- **RFC 5869** - HKDF спецификация
- **RFC 4231** - HMAC тестовые векторы
- **RFC 6070** - PBKDF2 тестовые векторы

### Инструменты и библиотеки
- **Python** - язык реализации
- **pycryptodome** - криптографические примитивы
- **OpenSSL** - эталон для тестирования совместимости
- **NIST STS** - статистические тесты ГСЧ